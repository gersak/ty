<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ty Icon Component - Reactive Updates Demo</title>
    <link rel="stylesheet" href="css/ty.variables.css">
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            padding: 2rem;
            background: var(--ty-bg);
            color: var(--ty-text);
        }
        
        .demo-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid var(--ty-border);
            border-radius: var(--ty-radius-lg);
            background: var(--ty-bg-surface);
        }
        
        .demo-section h2 {
            margin-bottom: 1rem;
            color: var(--ty-text-heading);
        }
        
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .icon-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border: 1px solid var(--ty-border);
            border-radius: var(--ty-radius-md);
            background: var(--ty-bg);
        }
        
        .icon-card ty-icon {
            font-size: 32px;
        }
        
        .icon-card code {
            font-size: 12px;
            color: var(--ty-text-muted);
        }
        
        .controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        .button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--ty-border);
            border-radius: var(--ty-radius-md);
            background: var(--ty-bg);
            cursor: pointer;
            font-size: 14px;
            transition: all var(--ty-transition-fast);
        }
        
        .button:hover {
            background: var(--ty-bg-hover);
            transform: translateY(-1px);
        }
        
        .button.primary {
            background: var(--ty-color-important);
            color: white;
            border-color: var(--ty-color-important);
        }
        
        .button.primary:hover {
            background: var(--ty-color-important-p1);
        }
        
        .status {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: var(--ty-radius-md);
            background: var(--ty-bg-neutral);
            font-size: 14px;
            color: var(--ty-text-muted);
        }
        
        /* Icon theme colors */
        .theme-positive { color: var(--ty-color-positive); }
        .theme-negative { color: var(--ty-color-negative); }
        .theme-important { color: var(--ty-color-important); }
        .theme-exception { color: var(--ty-color-exception); }
    </style>
</head>
<body>
    <h1>Ty Icon Component - Reactive Updates</h1>
    
    <div class="demo-section">
        <h2>Live Icon Store Updates</h2>
        <p>These icons will automatically update when the icon store changes:</p>
        
        <div class="icon-grid">
            <div class="icon-card">
                <ty-icon name="icon1" class="theme-positive"></ty-icon>
                <code>icon1</code>
            </div>
            
            <div class="icon-card">
                <ty-icon name="icon2" class="theme-negative"></ty-icon>
                <code>icon2</code>
            </div>
            
            <div class="icon-card">
                <ty-icon name="icon3" class="theme-important"></ty-icon>
                <code>icon3</code>
            </div>
            
            <div class="icon-card">
                <ty-icon name="icon4" class="theme-exception"></ty-icon>
                <code>icon4</code>
            </div>
        </div>
        
        <div class="controls">
            <button class="button primary" onclick="loadIcons()">Load Icons</button>
            <button class="button" onclick="updateIcon('icon1')">Update Icon 1</button>
            <button class="button" onclick="updateIcon('icon2')">Update Icon 2</button>
            <button class="button" onclick="updateIcon('icon3')">Update Icon 3</button>
            <button class="button" onclick="updateIcon('icon4')">Update Icon 4</button>
            <button class="button" onclick="clearIcons()">Clear All</button>
        </div>
        
        <div id="status" class="status">
            Icon store is empty. Click "Load Icons" to populate.
        </div>
    </div>
    
    <div class="demo-section">
        <h2>Dynamic Icon Addition</h2>
        <p>Add new icons to the page and watch them react to store changes:</p>
        
        <div id="dynamic-container" class="icon-grid">
            <!-- Dynamic icons will be added here -->
        </div>
        
        <div class="controls">
            <button class="button" onclick="addDynamicIcon()">Add Icon</button>
            <button class="button" onclick="removeDynamicIcon()">Remove Icon</button>
            <button class="button" onclick="clearDynamic()">Clear All</button>
        </div>
    </div>
    
    <div class="demo-section">
        <h2>Multiple Icons with Same Name</h2>
        <p>All icons with the same name update together:</p>
        
        <div class="icon-grid">
            <div class="icon-card">
                <ty-icon name="shared" class="icon-lg"></ty-icon>
                <code>16px</code>
            </div>
            
            <div class="icon-card">
                <ty-icon name="shared" class="icon-xl theme-positive"></ty-icon>
                <code>24px green</code>
            </div>
            
            <div class="icon-card">
                <ty-icon name="shared" class="icon-2xl theme-negative"></ty-icon>
                <code>32px red</code>
            </div>
            
            <div class="icon-card">
                <ty-icon name="shared" class="icon-spin" style="font-size: 48px;"></ty-icon>
                <code>48px spinning</code>
            </div>
        </div>
        
        <div class="controls">
            <button class="button" onclick="updateIcon('shared')">Update Shared Icon</button>
        </div>
    </div>
    
    <script src="js/main.js"></script>
    <script>
        // Initialize the library
        ty.core.init();
        
        // Sample SVG icons
        const sampleIcons = {
            circle: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="currentColor"/></svg>',
            square: '<svg viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" fill="currentColor"/></svg>',
            triangle: '<svg viewBox="0 0 24 24"><path d="M12 2 L22 20 L2 20 Z" fill="currentColor"/></svg>',
            star: '<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor"/></svg>',
            heart: '<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor"/></svg>',
            check: '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/></svg>'
        };
        
        let iconIndex = 0;
        let dynamicCount = 0;
        
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
        }
        
        function loadIcons() {
            ty.icons.set({
                'icon1': sampleIcons.circle,
                'icon2': sampleIcons.square,
                'icon3': sampleIcons.triangle,
                'icon4': sampleIcons.star,
                'shared': sampleIcons.heart
            });
            updateStatus('Icons loaded! Try updating individual icons.');
        }
        
        function updateIcon(name) {
            const iconKeys = Object.keys(sampleIcons);
            const currentIcons = ty.icons.get(name);
            
            // Cycle through available icons
            iconIndex = (iconIndex + 1) % iconKeys.length;
            const newIcon = sampleIcons[iconKeys[iconIndex]];
            
            // Update just this icon
            ty.icons.add({ [name]: newIcon });
            updateStatus(`Updated ${name} to ${iconKeys[iconIndex]} shape`);
        }
        
        function clearIcons() {
            ty.icons.set({});
            updateStatus('All icons cleared from store');
        }
        
        function addDynamicIcon() {
            dynamicCount++;
            const container = document.getElementById('dynamic-container');
            const iconCard = document.createElement('div');
            iconCard.className = 'icon-card';
            iconCard.innerHTML = `
                <ty-icon name="dynamic${dynamicCount}" class="icon-xl"></ty-icon>
                <code>dynamic${dynamicCount}</code>
            `;
            container.appendChild(iconCard);
            
            // Add this icon to the store
            ty.icons.add({ [`dynamic${dynamicCount}`]: sampleIcons.star });
            updateStatus(`Added dynamic${dynamicCount} icon`);
        }
        
        function removeDynamicIcon() {
            const container = document.getElementById('dynamic-container');
            if (container.lastChild) {
                container.removeChild(container.lastChild);
                updateStatus('Removed last dynamic icon');
            }
        }
        
        function clearDynamic() {
            document.getElementById('dynamic-container').innerHTML = '';
            dynamicCount = 0;
            updateStatus('Cleared all dynamic icons');
        }
    </script>
</body>
</html>
