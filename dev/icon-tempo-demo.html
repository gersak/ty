<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ty Icon Component - Tempo Demo</title>
    <link rel="stylesheet" href="css/ty.variables.css">
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            padding: 2rem;
            background: var(--ty-bg);
            color: var(--ty-text);
        }

        .demo-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid var(--ty-border);
            border-radius: var(--ty-radius-lg);
            background: var(--ty-bg-surface);
        }

        .demo-section h2 {
            margin-bottom: 1rem;
            color: var(--ty-text-heading);
        }

        .tempo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .tempo-demo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            border: 1px solid var(--ty-border);
            border-radius: var(--ty-radius-md);
            background: var(--ty-bg);
        }

        .tempo-demo code {
            font-size: 13px;
            color: var(--ty-text-muted);
            text-align: center;
        }

        .tempo-label {
            font-size: 14px;
            font-weight: 500;
            color: var(--ty-text);
        }

        /* Status indicators */
        .status-loading {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: var(--ty-radius-md);
            background: var(--ty-bg-neutral);
            margin: 0.5rem;
        }

        .status-success {
            color: var(--ty-color-positive);
        }

        .status-error {
            color: var(--ty-color-negative);
        }

        .status-warning {
            color: var(--ty-color-exception);
        }

        /* Control panel */
        .controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .button {
            padding: 0.5rem 1rem;
            border: 1px solid var(--ty-border);
            border-radius: var(--ty-radius-md);
            background: var(--ty-bg);
            cursor: pointer;
            font-size: 14px;
            transition: all var(--ty-transition-fast);
        }

        .button:hover {
            background: var(--ty-bg-hover);
        }

        .button.active {
            background: var(--ty-color-important);
            color: white;
            border-color: var(--ty-color-important);
        }

        /* Test results */
        .test-results {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--ty-bg-neutral);
            border-radius: var(--ty-radius-md);
            font-family: monospace;
            font-size: 13px;
            white-space: pre-wrap;
        }

        .test-success {
            color: var(--ty-color-positive);
        }

        .test-error {
            color: var(--ty-color-negative);
        }
    </style>
</head>

<body>
    <h1>Ty Icon Component - Animation Tempo</h1>

    <div class="demo-section">
        <h2>Spin Animation with Different Tempos</h2>

        <div class="tempo-grid">
            <div class="tempo-demo">
                <ty-icon name="loading" size="2xl" spin tempo="slow"></ty-icon>
                <span class="tempo-label">Slow (2s)</span>
                <code>&lt;ty-icon spin tempo="slow"&gt;</code>
            </div>

            <div class="tempo-demo">
                <ty-icon name="loading" size="2xl" spin></ty-icon>
                <span class="tempo-label">Default (1s)</span>
                <code>&lt;ty-icon spin&gt;</code>
            </div>

            <div class="tempo-demo">
                <ty-icon name="loading" size="2xl" spin tempo="fast"></ty-icon>
                <span class="tempo-label">Fast (0.5s)</span>
                <code>&lt;ty-icon spin tempo="fast"&gt;</code>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>Pulse Animation with Different Tempos</h2>

        <div class="tempo-grid">
            <div class="tempo-demo">
                <ty-icon name="alert" size="2xl" pulse tempo="slow" class="status-warning"></ty-icon>
                <span class="tempo-label">Slow (3s)</span>
                <code>&lt;ty-icon pulse tempo="slow"&gt;</code>
            </div>

            <div class="tempo-demo">
                <ty-icon name="alert" size="2xl" pulse class="status-warning"></ty-icon>
                <span class="tempo-label">Default (2s)</span>
                <code>&lt;ty-icon pulse&gt;</code>
            </div>

            <div class="tempo-demo">
                <ty-icon name="alert" size="2xl" pulse tempo="fast" class="status-warning"></ty-icon>
                <span class="tempo-label">Fast (1s)</span>
                <code>&lt;ty-icon pulse tempo="fast"&gt;</code>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>Real-world Use Cases</h2>

        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <div class="status-loading">
                <ty-icon name="loading" spin tempo="slow"></ty-icon>
                <span>Processing large file... (slow spin)</span>
            </div>

            <div class="status-loading">
                <ty-icon name="loading" spin></ty-icon>
                <span>Loading data... (normal spin)</span>
            </div>

            <div class="status-loading">
                <ty-icon name="loading" spin tempo="fast"></ty-icon>
                <span>Quick operation... (fast spin)</span>
            </div>

            <div class="status-loading status-success">
                <ty-icon name="check" pulse tempo="slow"></ty-icon>
                <span>Success! (gentle pulse)</span>
            </div>

            <div class="status-loading status-error">
                <ty-icon name="error" pulse tempo="fast"></ty-icon>
                <span>Error occurred! (urgent pulse)</span>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>JS API Test</h2>
        <p>Testing the new clean JavaScript API:</p>

        <div class="controls">
            <button class="button" onclick="testSetAPI()">Test ty.icons.set()</button>
            <button class="button" onclick="testAddAPI()">Test ty.icons.add()</button>
            <button class="button" onclick="testGetAPI()">Test ty.icons.get_icon()</button>
            <button class="button" onclick="testReactivity()">Test Reactivity</button>
        </div>

        <div id="test-results" class="test-results"></div>

        <div style="margin-top: 1rem;">
            <h4>Test Icons:</h4>
            <div class="tempo-grid">
                <div class="tempo-demo">
                    <ty-icon name="test1" size="xl"></ty-icon>
                    <code>test1</code>
                </div>
                <div class="tempo-demo">
                    <ty-icon name="test2" size="xl"></ty-icon>
                    <code>test2</code>
                </div>
                <div class="tempo-demo">
                    <ty-icon name="test3" size="xl"></ty-icon>
                    <code>test3</code>
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>Interactive Tempo Control</h2>

        <div style="text-align: center;">
            <div style="margin-bottom: 2rem;">
                <ty-icon id="demo-icon" name="star" size="48" spin></ty-icon>
            </div>

            <div class="controls">
                <h4 style="width: 100%; margin: 0 0 1rem 0;">Animation Type:</h4>
                <button class="button active" id="btn-spin" onclick="setAnimation('spin')">Spin</button>
                <button class="button" id="btn-pulse" onclick="setAnimation('pulse')">Pulse</button>
                <button class="button" id="btn-none" onclick="setAnimation('none')">None</button>
            </div>

            <div class="controls" style="margin-top: 1rem;">
                <h4 style="width: 100%; margin: 0 0 1rem 0;">Tempo:</h4>
                <button class="button" id="btn-slow" onclick="setTempo('slow')">Slow</button>
                <button class="button active" id="btn-default" onclick="setTempo('')">Default</button>
                <button class="button" id="btn-fast" onclick="setTempo('fast')">Fast</button>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        // Sample icons
        const sampleIcons = {
            loading: '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z" fill="currentColor" opacity="0.3"/><path d="M12 2C6.48 2 2 6.48 2 12h2c0-4.42 3.58-8 8-8s8 3.58 8 8-3.58 8-8 8v2c5.52 0 10-4.48 10-10S17.52 2 12 2z" fill="currentColor"/></svg>',
            alert: '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="currentColor"/></svg>',
            check: '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/></svg>',
            error: '<svg viewBox="0 0 24 24"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z" fill="currentColor"/></svg>',
            star: '<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="currentColor"/></svg>'
        };

        // Test icons
        const testIcons = {
            test1: '<svg viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" fill="currentColor"/></svg>',
            test2: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" fill="currentColor"/></svg>',
            test3: '<svg viewBox="0 0 24 24"><polygon points="12,2 22,20 2,20" fill="currentColor"/></svg>'
        };

        // Initialize when ready
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize the library
            if (typeof ty !== 'undefined' && ty.core && ty.core.init) {
                ty.core.init();

                // Load initial icons using the clean JS API
                if (ty.icons && ty.icons.set) {
                    ty.icons.set(sampleIcons);
                    log('Initial icons loaded using ty.icons.set()', 'test-success');
                }
            }
        });

        // Test results logger
        function log(message, className = '') {
            const results = document.getElementById('test-results');
            const entry = document.createElement('div');
            entry.className = className;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            results.appendChild(entry);
            results.scrollTop = results.scrollHeight;
        }

        // API Test functions
        function testSetAPI() {
            try {
                log('Testing ty.icons.set() with new icons...');
                ty.icons.set(testIcons);
                log('✓ Successfully set test icons', 'test-success');

                // Verify
                const icon1 = ty.icons.get_icon('test1');
                if (icon1) {
                    log('✓ Verified: test1 icon exists', 'test-success');
                } else {
                    log('✗ Error: test1 icon not found', 'test-error');
                }
            } catch (e) {
                log(`✗ Error: ${e.message}`, 'test-error');
            }
        }

        function testAddAPI() {
            try {
                log('Testing ty.icons.add() to add more icons...');
                ty.icons.add({
                    added1: '<svg viewBox="0 0 24 24"><rect x="8" y="8" width="8" height="8" rx="4" fill="currentColor"/></svg>',
                    added2: '<svg viewBox="0 0 24 24"><path d="M12 2v20M2 12h20" stroke="currentColor" stroke-width="2"/></svg>'
                });
                log('✓ Successfully added new icons', 'test-success');

                // Verify original icons still exist
                const test1 = ty.icons.get_icon('test1');
                const added1 = ty.icons.get_icon('added1');
                if (test1 && added1) {
                    log('✓ Verified: both old and new icons exist', 'test-success');
                } else {
                    log('✗ Error: icons missing after add', 'test-error');
                }
            } catch (e) {
                log(`✗ Error: ${e.message}`, 'test-error');
            }
        }

        function testGetAPI() {
            try {
                log('Testing ty.icons.get_icon()...');
                const star = ty.icons.get_icon('star');
                const missing = ty.icons.get_icon('nonexistent');

                if (star) {
                    log('✓ Successfully retrieved "star" icon', 'test-success');
                } else {
                    log('✗ Error: "star" icon not found', 'test-error');
                }

                if (!missing) {
                    log('✓ Correctly returned undefined for missing icon', 'test-success');
                } else {
                    log('✗ Error: found nonexistent icon', 'test-error');
                }
            } catch (e) {
                log(`✗ Error: ${e.message}`, 'test-error');
            }
        }

        function testReactivity() {
            try {
                log('Testing reactivity: changing existing icon...');

                // Change an existing icon
                ty.icons.add({
                    star: '<svg viewBox="0 0 24 24"><path d="M12 2l3 7h7l-5.5 4 2 7-5.5-4-5.5 4 2-7L2 9h7z" fill="currentColor" stroke="currentColor" stroke-width="2" fill-opacity="0.3"/></svg>'
                });

                log('✓ Changed "star" icon - check if it updated in the UI', 'test-success');

                // Add a new icon to existing components
                setTimeout(() => {
                    log('Adding icon for previously missing "test3"...');
                    ty.icons.add({
                        test3: '<svg viewBox="0 0 24 24"><path d="M3 3h18v18H3z" fill="none" stroke="currentColor" stroke-width="3"/></svg>'
                    });
                    log('✓ Added test3 - check if it appeared', 'test-success');
                }, 1000);

            } catch (e) {
                log(`✗ Error: ${e.message}`, 'test-error');
            }
        }

        // Interactive controls
        let demoIcon;
        let currentAnimation = 'spin';
        let currentTempo = '';

        // Initialize after DOM is ready
        window.addEventListener('load', function () {
            demoIcon = document.getElementById('demo-icon');
        });

        function setAnimation(type) {
            if (!demoIcon) return;

            // Update buttons
            document.querySelectorAll('.controls button').forEach(btn => {
                if (btn.id.includes('spin') || btn.id.includes('pulse') || btn.id.includes('none')) {
                    btn.classList.remove('active');
                }
            });
            document.getElementById(`btn-${type}`).classList.add('active');

            // Update icon
            demoIcon.removeAttribute('spin');
            demoIcon.removeAttribute('pulse');

            if (type === 'spin') {
                demoIcon.setAttribute('spin', '');
            } else if (type === 'pulse') {
                demoIcon.setAttribute('pulse', '');
            }

            currentAnimation = type;
        }

        function setTempo(tempo) {
            if (!demoIcon) return;

            // Update buttons
            document.querySelectorAll('.controls button').forEach(btn => {
                if (btn.id.includes('slow') || btn.id.includes('default') || btn.id.includes('fast')) {
                    btn.classList.remove('active');
                }
            });
            document.getElementById(`btn-${tempo || 'default'}`).classList.add('active');

            // Update icon
            if (tempo) {
                demoIcon.setAttribute('tempo', tempo);
            } else {
                demoIcon.removeAttribute('tempo');
            }

            currentTempo = tempo;
        }
    </script>
</body>

</html>
