{% extends "base.html" %}

{% block title %}Server Error - Ty Components Demo{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full text-center">
        <div class="animate-fade-in">
            <!-- 500 Icon -->
            <div class="mx-auto w-24 h-24 ty-bg-warning-soft rounded-full flex items-center justify-center mb-8">
                <ty-icon name="zap-off" class="w-12 h-12 ty-text-warning-strong"></ty-icon>
            </div>
            
            <!-- Error Message -->
            <h1 class="text-6xl font-bold ty-text-warning-strong mb-4">500</h1>
            <h2 class="text-2xl font-semibold ty-text-neutral-strong mb-4">Server Error</h2>
            <p class="ty-text-neutral-mild mb-8 max-w-sm mx-auto leading-relaxed">
                Something went wrong on our end. Our robots are working hard to fix this!
            </p>
            
            <!-- Action Buttons -->
            <div class="space-y-4">
                <ty-button flavor="primary" size="lg" class="w-full" onclick="window.location.reload()">
                    <ty-icon name="refresh-cw" class="mr-2"></ty-icon>
                    Try Again
                </ty-button>
                
                <ty-button flavor="secondary" size="lg" class="w-full" onclick="window.location.href='{{ url_for('index') }}'">
                    <ty-icon name="home" class="mr-2"></ty-icon>
                    Return Home
                </ty-button>
            </div>
            
            <!-- Technical Info (Development Only) -->
            {% if config['DEBUG'] %}
            <div class="mt-12 pt-8 border-t ty-border-neutral-soft">
                <details class="ty-bg-neutral-soft rounded-lg p-4 text-left">
                    <summary class="cursor-pointer font-medium ty-text-neutral-strong hover:ty-text-primary">
                        <ty-icon name="code" class="w-4 h-4 mr-2 inline"></ty-icon>
                        Technical Details (Debug Mode)
                    </summary>
                    <div class="mt-4 text-sm ty-text-neutral-mild font-mono">
                        <p><strong>Error:</strong> Internal Server Error</p>
                        <p><strong>Time:</strong> {{ moment().format('YYYY-MM-DD HH:mm:ss') if moment else 'Unknown' }}</p>
                        <p class="mt-2 text-xs">Check the Flask console for detailed error logs.</p>
                    </div>
                </details>
            </div>
            {% endif %}
            
            <!-- Helpful Links -->
            <div class="mt-8">
                <p class="ty-text-neutral-soft text-sm mb-4">Need help?</p>
                <div class="flex flex-wrap gap-3 justify-center">
                    <a href="{{ url_for('index') }}" class="btn-ghost text-sm">
                        <ty-icon name="home" class="w-4 h-4 mr-1"></ty-icon>
                        Home
                    </a>
                    <button onclick="window.history.back()" class="btn-ghost text-sm">
                        <ty-icon name="arrow-left" class="w-4 h-4 mr-1"></ty-icon>
                        Go Back
                    </button>
                    <button onclick="window.location.reload()" class="btn-ghost text-sm">
                        <ty-icon name="refresh-cw" class="w-4 h-4 mr-1"></ty-icon>
                        Refresh
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Add some retry logic and animations
document.addEventListener('DOMContentLoaded', function() {
    // Animate the error icon
    const errorIcon = document.querySelector('.ty-bg-warning-soft');
    if (errorIcon) {
        errorIcon.addEventListener('mouseenter', function() {
            this.classList.add('animate-bounce');
        });
        errorIcon.addEventListener('mouseleave', function() {
            this.classList.remove('animate-bounce');
        });
    }
    
    // Auto-retry mechanism (optional - disabled by default)
    // Uncomment to enable auto-retry after 10 seconds
    /*
    setTimeout(function() {
        if (confirm('Would you like to try reloading the page automatically?')) {
            window.location.reload();
        }
    }, 10000);
    */
});
</script>
{% endblock %}
