/**
 * Ty Components + Tailwind CSS Integration
 * 
 * This file integrates Tailwind CSS with the Ty CSS system for semantic design.
 * It preserves Ty's semantic color system while adding Tailwind's utility classes.
 */

/* Import Ty CSS first - foundation for our semantic system */
@import url('https://unpkg.com/@gersak/ty@latest/css/ty.css');

/* Tailwind CSS directives - will be processed by PostCSS */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Enhanced CSS Reset and Base Styles */
@layer base {
  *, *::before, *::after {
    @apply box-border;
  }

  html, body {
    @apply h-full font-sans overflow-x-hidden;
    /* Use Ty's semantic canvas color for body background */
    background-color: var(--ty-surface-canvas);
    color: var(--ty-color-neutral-strong);
    line-height: var(--ty-line-height-normal);
  }

  /* Enhanced theme variables building on Ty's system */
  :root {
    /* App-specific layout variables */
    --app-header-height: 64px;
    --app-sidebar-width: 280px;
    --app-sidebar-collapsed-width: 64px;
    --app-content-padding: 24px;
    
    /* Animation variables */
    --app-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --app-transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* Component Layer - Semantic component patterns using Tailwind + Ty */
@layer components {
  
  /* App Layout Components */
  .app-layout {
    @apply min-h-screen grid transition-all duration-300;
    grid-template-columns: var(--app-sidebar-width) 1fr;
    grid-template-rows: var(--app-header-height) 1fr;
    grid-template-areas: 
      "sidebar header"
      "sidebar main";
  }

  .app-layout.sidebar-collapsed {
    grid-template-columns: var(--app-sidebar-collapsed-width) 1fr;
  }

  /* Header Component */
  .app-header {
    @apply flex items-center justify-between px-6 z-10;
    grid-area: header;
    background-color: var(--ty-surface-elevated);
    border-bottom: 1px solid var(--ty-border);
    box-shadow: var(--ty-shadow-sm);
    min-height: var(--app-header-height);
  }

  .app-header-left {
    @apply flex items-center gap-4;
  }

  .app-header-right {
    @apply flex items-center gap-3;
  }

  .app-logo {
    @apply text-2xl font-semibold no-underline transition-colors duration-150;
    color: var(--ty-color-primary);
  }

  .app-logo:hover {
    color: var(--ty-color-primary-mild);
  }

  /* Sidebar Component */
  .app-sidebar {
    @apply overflow-y-auto transition-all duration-300 relative;
    grid-area: sidebar;
    background-color: var(--ty-surface-content);
    border-right: 1px solid var(--ty-border);
  }

  .sidebar-header {
    @apply p-4 flex items-center justify-between;
    border-bottom: 1px solid var(--ty-border-soft);
    min-height: var(--app-header-height);
  }

  .sidebar-title {
    @apply text-lg font-semibold;
    color: var(--ty-color-neutral-strong);
  }

  .sidebar-nav {
    @apply py-4;
  }

  .nav-section {
    @apply mb-6;
  }

  .nav-section-title {
    @apply px-4 py-2 text-xs font-semibold uppercase tracking-wider mb-2;
    color: var(--ty-color-neutral-soft);
  }

  .nav-item {
    @apply flex items-center px-4 py-3 no-underline transition-all duration-150 gap-3;
    color: var(--ty-color-neutral);
    border-left: 3px solid transparent;
  }

  .nav-item:hover {
    background-color: var(--ty-bg-neutral-soft);
    color: var(--ty-color-neutral-strong);
  }

  .nav-item.active {
    background-color: var(--ty-bg-primary-soft);
    border-left-color: var(--ty-color-primary);
    color: var(--ty-color-primary-strong);
  }

  .nav-item-icon {
    @apply flex-shrink-0 w-5 h-5;
  }

  .nav-item-text {
    @apply transition-opacity duration-150;
  }

  /* Main Content Component */
  .app-main {
    @apply overflow-auto;
    grid-area: main;
    background-color: var(--ty-surface-canvas);
    padding: var(--app-content-padding);
  }

  .content-container {
    @apply max-w-6xl mx-auto;
  }

  /* Page Header Component */
  .page-header {
    @apply mb-8 pb-4;
    border-bottom: 1px solid var(--ty-border-soft);
  }

  .page-title {
    @apply text-3xl font-bold mb-2;
    color: var(--ty-color-neutral-strong);
  }

  .page-description {
    @apply text-base leading-relaxed;
    color: var(--ty-color-neutral);
  }

  /* Component Section */
  .component-section {
    @apply rounded-xl p-6 mb-6;
    background-color: var(--ty-surface-elevated);
    border: 1px solid var(--ty-border);
    box-shadow: var(--ty-shadow-sm);
  }

  .section-header {
    @apply mb-5;
  }

  .section-title {
    @apply text-xl font-semibold mb-1;
    color: var(--ty-color-neutral-strong);
  }

  .section-description {
    @apply text-sm;
    color: var(--ty-color-neutral);
  }

  .component-demo {
    @apply p-5 rounded-lg my-4;
    background-color: var(--ty-surface-canvas);
    border: 1px solid var(--ty-border-soft);
  }

  /* Theme Toggle Component */
  .theme-toggle {
    @apply relative flex items-center gap-2;
  }

  .theme-toggle-icon {
    @apply transition-transform duration-150;
  }

  .theme-toggle-icon.sun {
    color: var(--ty-color-warning);
  }

  .theme-toggle-icon.moon {
    color: var(--ty-color-info);
  }

  /* Status Indicator Component */
  .status-indicator {
    @apply inline-flex items-center gap-2 px-2 py-1 rounded-md text-xs font-medium;
  }

  .status-indicator.success {
    background-color: var(--ty-bg-success-soft);
    color: var(--ty-color-success-strong);
  }

  .status-indicator.warning {
    background-color: var(--ty-bg-warning-soft);
    color: var(--ty-color-warning-strong);
  }

  .status-indicator.danger {
    background-color: var(--ty-bg-danger-soft);
    color: var(--ty-color-danger-strong);
  }

  .status-indicator.info {
    background-color: var(--ty-bg-info-soft);
    color: var(--ty-color-info-strong);
  }

  /* Code Block Component */
  .code-block {
    @apply p-4 rounded-md overflow-x-auto text-sm font-mono;
    background-color: var(--ty-surface-content);
    border: 1px solid var(--ty-border);
    color: var(--ty-color-neutral);
  }

  /* Theme Sample Component */
  .theme-sample {
    @apply p-4 rounded-lg;
    background-color: var(--ty-surface-elevated);
    border: 1px solid var(--ty-border);
  }

  /* Responsive Design - Collapsed Sidebar */
  .app-layout.sidebar-collapsed .nav-item-text,
  .app-layout.sidebar-collapsed .sidebar-title,
  .app-layout.sidebar-collapsed .nav-section-title {
    @apply opacity-0 pointer-events-none;
  }

  .app-layout.sidebar-collapsed .nav-item {
    @apply justify-center px-3;
  }

  .app-layout.sidebar-collapsed .sidebar-header {
    @apply justify-center;
  }
}

/* Utility Layer - Custom utilities for Ty + Tailwind integration */
@layer utilities {
  
  /* Responsive utilities for mobile sidebar */
  @media (max-width: 768px) {
    .app-layout {
      @apply grid-cols-1;
      grid-template-rows: var(--app-header-height) 1fr;
      grid-template-areas: 
        "header"
        "main";
    }
    
    .app-sidebar {
      @apply fixed left-0 bottom-0 z-20 -translate-x-full transition-transform duration-300;
      top: var(--app-header-height);
      width: var(--app-sidebar-width);
    }
    
    .app-layout.sidebar-open .app-sidebar {
      @apply translate-x-0;
    }
    
    .mobile-sidebar-overlay {
      @apply fixed inset-0 bg-black bg-opacity-50 z-15 opacity-0 pointer-events-none transition-opacity duration-300;
    }
    
    .app-layout.sidebar-open .mobile-sidebar-overlay {
      @apply opacity-100 pointer-events-auto;
    }
    
    .page-title {
      @apply text-2xl;
    }
    
    .component-section {
      @apply p-4;
    }
  }

  /* Very small screens */
  @media (max-width: 480px) {
    .app-header {
      @apply px-4;
    }
    
    .page-title {
      @apply text-xl;
    }
    
    .section-title {
      @apply text-lg;
    }
  }

  /* Semantic spacing utilities - using Ty's spacing scale */
  .spacing-ty-1 { @apply p-1; }
  .spacing-ty-2 { @apply p-2; }
  .spacing-ty-3 { @apply p-3; }
  .spacing-ty-4 { @apply p-4; }
  .spacing-ty-6 { @apply p-6; }
  .spacing-ty-8 { @apply p-8; }

  /* Semantic text utilities */
  .text-hierarchy-strong { color: var(--ty-color-neutral-strong); }
  .text-hierarchy-mild { color: var(--ty-color-neutral-mild); }
  .text-hierarchy-base { color: var(--ty-color-neutral); }
  .text-hierarchy-soft { color: var(--ty-color-neutral-soft); }
  .text-hierarchy-faint { color: var(--ty-color-neutral-faint); }

  /* Surface utilities */
  .bg-ty-canvas { background-color: var(--ty-surface-canvas); }
  .bg-ty-content { background-color: var(--ty-surface-content); }
  .bg-ty-elevated { 
    background-color: var(--ty-surface-elevated);
    box-shadow: var(--ty-shadow-base);
  }
  .bg-ty-floating { 
    background-color: var(--ty-surface-floating);
    box-shadow: var(--ty-shadow-md);
  }
  .bg-ty-input { background-color: var(--ty-surface-input); }

  /* Border utilities */
  .border-ty { border-color: var(--ty-border); }
  .border-ty-soft { border-color: var(--ty-border-soft); }
  .border-ty-strong { border-color: var(--ty-border-strong); }

  /* Shadow utilities */
  .shadow-ty-sm { box-shadow: var(--ty-shadow-sm); }
  .shadow-ty { box-shadow: var(--ty-shadow-base); }
  .shadow-ty-md { box-shadow: var(--ty-shadow-md); }
  .shadow-ty-lg { box-shadow: var(--ty-shadow-lg); }

  /* Transition utilities */
  .transition-ty { transition: var(--ty-transition-all); }
  .transition-ty-colors { transition: var(--ty-transition-colors); }
  .transition-ty-shadow { transition: var(--ty-transition-shadow); }
}

/* Print Styles */
@media print {
  .app-sidebar,
  .app-header {
    @apply hidden;
  }
  
  .app-layout {
    @apply grid-cols-1;
    grid-template-areas: "main";
  }
}
