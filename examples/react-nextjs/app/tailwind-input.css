/**
 * Ty Components + Tailwind CSS Integration
 * 
 * This file integrates Tailwind CSS with the Ty CSS system for semantic design.
 * It preserves Ty's semantic color system while adding Tailwind's utility classes.
 */

/* Import Ty CSS first - foundation for our semantic system */
@import url('https://unpkg.com/@gersak/ty@latest/css/ty.css');

/* Tailwind CSS directives - will be processed by PostCSS */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Enhanced base styles that integrate Ty with Tailwind */
@layer base {
  html, body {
    /* Use Ty's semantic canvas color for body background */
    background-color: var(--ty-surface-canvas);
    color: var(--ty-color-neutral-strong);
    line-height: var(--ty-line-height-normal);
  }

  /* App-specific layout variables */
  :root {
    --app-header-height: 64px;
    --app-sidebar-width: 280px;
    --app-sidebar-collapsed-width: 64px;
    --app-content-padding: 24px;
    --app-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --app-transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* Component layer - Complex components using both Tailwind and Ty */
@layer components {
  
  /* App Layout using CSS Grid + Tailwind classes */
  .app-layout {
    @apply min-h-screen grid transition-all duration-300;
    grid-template-columns: var(--app-sidebar-width) 1fr;
    grid-template-rows: var(--app-header-height) 1fr;
    grid-template-areas: 
      "sidebar header"
      "sidebar main";
  }

  .app-layout.sidebar-collapsed {
    grid-template-columns: var(--app-sidebar-collapsed-width) 1fr;
  }

  /* Header using Tailwind + Ty surface variables */
  .app-header {
    @apply flex items-center justify-between px-6 z-10;
    grid-area: header;
    background-color: var(--ty-surface-elevated);
    border-bottom: 1px solid var(--ty-border);
    box-shadow: var(--ty-shadow-sm);
    min-height: var(--app-header-height);
  }

  .app-header-left {
    @apply flex items-center gap-4;
  }

  .app-header-right {
    @apply flex items-center gap-3;
  }

  .app-logo {
    @apply text-2xl font-semibold no-underline transition-colors duration-150;
    color: var(--ty-color-primary);
  }

  .app-logo:hover {
    color: var(--ty-color-primary-mild);
  }

  /* Sidebar using Tailwind layout + Ty theming */
  .app-sidebar {
    @apply overflow-y-auto transition-all duration-300 relative;
    grid-area: sidebar;
    background-color: var(--ty-surface-content);
    border-right: 1px solid var(--ty-border);
  }

  .sidebar-header {
    @apply p-4 flex items-center justify-between;
    border-bottom: 1px solid var(--ty-border-soft);
    min-height: var(--app-header-height);
  }

  .sidebar-title {
    @apply text-lg font-semibold;
    color: var(--ty-color-neutral-strong);
  }

  /* Navigation using Tailwind layout + Ty semantic colors */
  .sidebar-nav {
    @apply py-4;
  }

  .nav-section {
    @apply mb-6;
  }

  .nav-section-title {
    @apply px-4 py-2 text-xs font-semibold uppercase tracking-wider mb-2;
    color: var(--ty-color-neutral-soft);
  }

  .nav-item {
    @apply flex items-center px-4 py-3 no-underline transition-all duration-150 gap-3;
    color: var(--ty-color-neutral);
    border-left: 3px solid transparent;
  }

  .nav-item:hover {
    background-color: var(--ty-bg-neutral-soft);
    color: var(--ty-color-neutral-strong);
  }

  .nav-item.active {
    background-color: var(--ty-bg-primary-soft);
    border-left-color: var(--ty-color-primary);
    color: var(--ty-color-primary-strong);
  }

  .nav-item-icon {
    @apply flex-shrink-0 w-5 h-5;
  }

  .nav-item-text {
    @apply transition-opacity duration-150;
  }

  /* Main content using Tailwind spacing + Ty surfaces */
  .app-main {
    @apply overflow-auto;
    grid-area: main;
    background-color: var(--ty-surface-canvas);
    padding: var(--app-content-padding);
  }

  .content-container {
    @apply max-w-6xl mx-auto;
  }

  /* Page components using Tailwind + Ty */
  .page-header {
    @apply mb-8 pb-4;
    border-bottom: 1px solid var(--ty-border-soft);
  }

  .page-title {
    @apply text-3xl font-bold mb-2;
    color: var(--ty-color-neutral-strong);
  }

  .page-description {
    @apply text-base leading-relaxed;
    color: var(--ty-color-neutral);
  }

  /* Component showcase sections */
  .component-section {
    @apply rounded-xl p-6 mb-6;
    background-color: var(--ty-surface-elevated);
    border: 1px solid var(--ty-border);
    box-shadow: var(--ty-shadow-sm);
  }

  .section-header {
    @apply mb-5;
  }

  .section-title {
    @apply text-xl font-semibold mb-1;
    color: var(--ty-color-neutral-strong);
  }

  .section-description {
    @apply text-sm;
    color: var(--ty-color-neutral);
  }

  .component-demo {
    @apply p-5 rounded-lg my-4;
    background-color: var(--ty-surface-canvas);
    border: 1px solid var(--ty-border-soft);
  }

  /* Status indicators using Ty semantic backgrounds */
  .status-indicator {
    @apply inline-flex items-center gap-2 px-2 py-1 rounded-md text-xs font-medium;
  }

  .status-indicator.success {
    background-color: var(--ty-bg-success-soft);
    color: var(--ty-color-success-strong);
  }

  .status-indicator.warning {
    background-color: var(--ty-bg-warning-soft);
    color: var(--ty-color-warning-strong);
  }

  .status-indicator.danger {
    background-color: var(--ty-bg-danger-soft);
    color: var(--ty-color-danger-strong);
  }

  .status-indicator.info {
    background-color: var(--ty-bg-info-soft);
    color: var(--ty-color-info-strong);
  }

  /* Theme samples using Ty variables */
  .theme-sample {
    @apply p-4 rounded-lg;
    background-color: var(--ty-surface-elevated);
    border: 1px solid var(--ty-border);
  }

  /* Code blocks */
  .code-block {
    @apply p-4 rounded-md overflow-x-auto text-sm font-mono;
    background-color: var(--ty-surface-content);
    border: 1px solid var(--ty-border);
    color: var(--ty-color-neutral);
  }
}

/* Utilities layer - Additional Ty-specific utilities */
@layer utilities {
  
  /* Responsive utilities for mobile sidebar */
  @media (max-width: 768px) {
    .app-layout {
      @apply grid-cols-1;
      grid-template-rows: var(--app-header-height) 1fr;
      grid-template-areas: 
        "header"
        "main";
    }
    
    .app-sidebar {
      @apply fixed left-0 bottom-0 z-20 -translate-x-full transition-transform duration-300;
      top: var(--app-header-height);
      width: var(--app-sidebar-width);
    }
    
    .app-layout.sidebar-open .app-sidebar {
      @apply translate-x-0;
    }
    
    .mobile-sidebar-overlay {
      @apply fixed inset-0 bg-black bg-opacity-50 opacity-0 pointer-events-none transition-opacity duration-300;
      z-index: 15;
    }
    
    .app-layout.sidebar-open .mobile-sidebar-overlay {
      @apply opacity-100 pointer-events-auto;
    }
    
    .page-title {
      @apply text-2xl;
    }
    
    .component-section {
      @apply p-4;
    }
  }

  /* Collapsed sidebar styles */
  .app-layout.sidebar-collapsed .nav-item-text,
  .app-layout.sidebar-collapsed .sidebar-title,
  .app-layout.sidebar-collapsed .nav-section-title {
    @apply opacity-0 pointer-events-none;
  }

  .app-layout.sidebar-collapsed .nav-item {
    @apply justify-center px-3;
  }

  .app-layout.sidebar-collapsed .sidebar-header {
    @apply justify-center;
  }

  /* Theme toggle utilities */
  .theme-toggle {
    @apply relative flex items-center gap-2;
  }

  .theme-toggle-icon {
    @apply transition-transform duration-150;
  }

  .theme-toggle-icon.sun {
    color: var(--ty-color-warning);
  }

  .theme-toggle-icon.moon {
    color: var(--ty-color-info);
  }
}
