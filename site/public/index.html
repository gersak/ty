<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Ty Components - Professional Web Components Showcase</title>
    <meta name="description"
        content="Explore professional, framework-agnostic web components through real-world scenarios. Ty Components provides a semantic design system with comprehensive theming and accessibility.">

    <!-- Ty Complete CSS System (Variables + Utilities) -->
    <link rel="stylesheet" href="/css/ty.css">

    <!-- Site-specific Tailwind CSS -->
    <link rel="stylesheet" href="/css/site.css">

    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
        id="hljs-light">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
        id="hljs-dark" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/clojure.min.js"></script>

    <!-- Mobile-specific CSS fixes -->
    <style>
        /* Prevent horizontal scroll on mobile */
        html,
        body {
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
        }

        /* Fix for code blocks that might overflow */
        pre,
        code {
            overflow-x: auto;
            word-break: break-word;
            white-space: pre-wrap;
        }

        /* Custom Highlight.js integration with Ty theme system */
        .hljs {
            background: var(--ty-surface-elevated) !important;
            color: var(--ty-text) !important;
            border: 1px solid var(--ty-border);
            border-radius: 8px;
            padding: 1rem !important;
            font-size: 0.875rem;
            line-height: 1.5;
            margin: 0;
        }

        /* Override specific highlight.js token colors to use ty semantic colors */
        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-built_in,
        .hljs-name {
            color: var(--ty-color-primary) !important;
        }

        .hljs-string,
        .hljs-attr {
            color: var(--ty-color-success) !important;
        }

        .hljs-number,
        .hljs-literal {
            color: var(--ty-color-info) !important;
        }

        .hljs-comment {
            color: var(--ty-text--) !important;
            font-style: italic;
        }

        .hljs-function,
        .hljs-title {
            color: var(--ty-color-secondary) !important;
        }

        .hljs-variable,
        .hljs-template-variable {
            color: var(--ty-color-warning) !important;
        }

        .hljs-type,
        .hljs-class {
            color: var(--ty-color-info) !important;
        }

        /* Inline code styling */
        code:not(.hljs) {
            background: var(--ty-surface-content);
            color: var(--ty-text+);
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-size: 0.875em;
            border: 1px solid var(--ty-border-);
        }

        /* Pre blocks containing highlighted code */
        pre.hljs {
            white-space: pre;
            word-break: normal;
        }

        /* Mobile typography adjustments */
        @media (max-width: 768px) {

            /* Smaller base font size on mobile */
            html {
                font-size: 14px;
            }

            /* Adjust hero text for mobile */
            .hero-title {
                font-size: 2rem !important;
                line-height: 1.2 !important;
            }

            .hero-subtitle {
                font-size: 1.1rem !important;
                line-height: 1.4 !important;
            }

            /* Smaller padding for mobile */
            .scenario-section {
                margin-bottom: 2rem !important;
                padding: 1rem !important;
            }
        }

        /* Ensure grid layouts don't overflow */
        .grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        @media (max-width: 640px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        /* Site-specific menu styles */
        .menu-item {
            @apply flex items-center gap-2 lg:gap-3 w-full px-2 lg:px-3 py-2 text-left rounded-md text-sm lg:text-base transition-colors;
            @apply ty-text hover:ty-content;
        }

        .menu-item.active {
            @apply ty-bg-primary- ty-text-primary+;
        }

        /* Site-specific responsive design */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }
        }
    </style>

    <!-- Prevent FOUC -->
    <script>
        // Set initial theme based on localStorage or system preference
        const storedTheme = localStorage.getItem('theme');
        const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        const theme = storedTheme || systemTheme || 'light';

        if (theme === 'dark') {
            document.documentElement.classList.add('dark');
        }

        // Initialize Highlight.js when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize highlight.js
            hljs.highlightAll();

            // Set initial highlight.js theme
            updateHighlightTheme(theme);

            // Add language labels and copy buttons to code blocks
            document.querySelectorAll('pre code.hljs').forEach(block => {
                const language = Array.from(block.classList)
                    .find(cls => cls.startsWith('language-') || cls.startsWith('hljs-'))
                    ?.replace(/^(language-|hljs-)/, '') || 'code';

                const container = block.parentElement;
                container.style.position = 'relative';

                // Add language label
                if (language && language !== 'hljs' && language !== 'code') {
                    const label = document.createElement('div');
                    label.textContent = language;
                    label.style.cssText = `
                        position: absolute;
                        top: 0.5rem;
                        right: 4rem;
                        font-size: 0.75rem;
                        color: var(--ty-text--);
                        background: var(--ty-surface-content);
                        padding: 0.25rem 0.5rem;
                        border-radius: 4px;
                        border: 1px solid var(--ty-border-);
                        pointer-events: none;
                    `;
                    container.appendChild(label);
                }

                // Add copy button
                const copyButton = document.createElement('button');
                copyButton.innerHTML = '<ty-icon name="copy" size="sm"></ty-icon>';
                copyButton.title = 'Copy to clipboard';
                copyButton.style.cssText = `
                    position: absolute;
                    top: 0.5rem;
                    right: 0.5rem;
                    width: 2rem;
                    height: 2rem;
                    background: var(--ty-surface-elevated);
                    border: 1px solid var(--ty-border);
                    border-radius: 4px;
                    cursor: pointer;
                    opacity: 0.7;
                    transition: opacity 0.2s, background-color 0.2s;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 0;
                `;

                // Copy button hover effects
                copyButton.addEventListener('mouseenter', () => {
                    copyButton.style.opacity = '1';
                    copyButton.style.backgroundColor = 'var(--ty-surface-floating)';
                });

                copyButton.addEventListener('mouseleave', () => {
                    copyButton.style.opacity = '0.7';
                    copyButton.style.backgroundColor = 'var(--ty-surface-elevated)';
                });

                // Copy functionality
                copyButton.addEventListener('click', async () => {
                    const code = block.textContent;
                    try {
                        await navigator.clipboard.writeText(code);

                        // Visual feedback with success icon
                        copyButton.innerHTML = '<ty-icon name="check" size="sm" class="ty-text-success"></ty-icon>';
                        copyButton.style.backgroundColor = 'var(--ty-bg-success-)';

                        setTimeout(() => {
                            copyButton.innerHTML = '<ty-icon name="copy" size="sm"></ty-icon>';
                            copyButton.style.backgroundColor = 'var(--ty-surface-elevated)';
                        }, 2000);

                    } catch (err) {
                        console.error('Failed to copy code:', err);

                        // Fallback feedback with error icon
                        copyButton.innerHTML = '<ty-icon name="x" size="sm" class="ty-text-danger"></ty-icon>';
                        copyButton.style.backgroundColor = 'var(--ty-bg-danger-)';

                        setTimeout(() => {
                            copyButton.innerHTML = '<ty-icon name="copy" size="sm"></ty-icon>';
                            copyButton.style.backgroundColor = 'var(--ty-surface-elevated)';
                        }, 2000);
                    }
                });

                container.appendChild(copyButton);
            });
        });

        // Function to update highlight.js theme
        function updateHighlightTheme(theme) {
            const lightTheme = document.getElementById('hljs-light');
            const darkTheme = document.getElementById('hljs-dark');

            if (theme === 'dark') {
                lightTheme.disabled = true;
                darkTheme.disabled = false;
            } else {
                lightTheme.disabled = false;
                darkTheme.disabled = true;
            }
        }

        // Listen for theme changes and update highlight.js accordingly
        const observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
                if (mutation.attributeName === 'class') {
                    const isDark = document.documentElement.classList.contains('dark');
                    updateHighlightTheme(isDark ? 'dark' : 'light');
                }
            });
        });

        observer.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['class']
        });
    </script>
</head>

<body>
    <!-- App will be mounted here -->
    <div id="app"></div>

    <!-- Load site app after DOM is ready -->
    <script src="/js/site.js"></script>
</body>

</html>
